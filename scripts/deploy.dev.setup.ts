// @ts-ignore
import { deployments, ethers } from 'hardhat';
import {
    waitForTx,
    getRoleManager,
    getOraclePriceFeed,
    getTokens,
    getFundingRate,
    COMMON_DEPLOY_PARAMS,
} from '../helpers';
import { IFundingRate } from '../types/contracts/core/FundingRate';
import usdc from '../markets/usdc';

async function main() {
    const [deployer] = await ethers.getSigners();
    console.log(deployer.address);
    console.log(await deployer.getBalance());

    const priceOracle = await getOraclePriceFeed();
    const roleManager = await getRoleManager();
    const fundingRate = await getFundingRate();

    const { btc, eth, usdt } = await getTokens();
    console.log(`btc price:`, ethers.utils.formatUnits(await priceOracle.getPrice(btc.address), 30));
    console.log(`eth price:`, ethers.utils.formatUnits(await priceOracle.getPrice(eth.address), 30));

    const keepers: string[] = [
        '0x66D1e5F498c21709dCFC916785f09Dcf2D663E63',
        '0x8C2B496E5BC13b4170dC818132bEE5413A39834C',
        '0x9a5c3C2843eB3d9b764A2F00236D8519989BbDa1',
        '0x299227e2bD681A510b00dFfaC9f4FD0Da0715B94',
        '0xF1BAB1E9ad036B53Ad653Af455C21796f15EE3bD',
        '0x8bc45c15C993A982AFc053ce0fF7B59b40eE0D7B',

        '0x28f5D9dA3699d82dd7Dc91C7a776Dc0F5C66a0dB',
        '0x679A66eB96d24c7e3E260FC15165c76B34325f57',
        '0x2e00086D3A5229c967807728A19c2C1617B0A41A',
        '0xe916F89A91ACbF8a37E8af61E94B1fa5A475385F',
        '0xdDa8a43Aa6931ab354067604118C02D67bA42ebB',
        '0x0Df050716de174a36C7f4837Bb2a5166A15963ee',
        '0x787E5C5BAf549969dD21fb7DFf64c71e0a6277e7',
        '0xc81b88D4d5323235276ba97B638EE6AccdBcA07b',
        '0xebF71DFb9ED7DdAA16bf6Ac719B545a5E5e66161',
        '0xE516b69dbc562e7a3DA03BC14469339B667A08FF',
        '0x0638740B0F25fCA1D767c0B43969d85AF99a4B97',
        '0x35e3492b63d710Ec6FE205864dd93da61C933B9e',
        '0x92A46B2edB0b94a644a5478d530C497EE9Bf105F',
        '0xA2ED377384f4B365c72D42F7bF1D3350D1bd8307',
        '0x854b46Bf92A701B6302e5FA74891A049dEF4fC17',
        '0x7c527e9c906FdAf1Cc9a0a0A834f3fB61f5bC5E7',
        '0x45F37EA1a742A844014E61a089E41F2E54d9afCB',
        '0x0E060A483DD21253CD9b925731410a5A36DeAFCA',
        '0x8a8351c5ce455316186b3df34c2C25699015d3A2',
        '0x5042EaB499772b0d5A6C21155289E68876c7075d',
        '0x707c081BEE64760c909fbE0f46650c53d4065631',
        '0x1d0E5cB02f13A701Ce304aE37F71964a698c17de',
        '0x6c243672d7B0e5AD15b09363498183fcf27Af326',
        '0x9e911374973Ac42cd6634d0Ab3f667193590BBBd',
        '0x098DADa780c91F7998ACfc3d15eB42e647bDf336',
        '0xd32Fa22171427D4B0D1741D54C3eC6Cd9AcFA289',
        '0xCBf4849393e1dcBeb6dE13216AfFDB481D3A05f5',
        '0xe7d052c39129DFdb637A5930c1FF14D7DF5E0BD4',
        '0xeaC1312b246CbA147Ca85713081e524726484797',
        '0x5E54c5ADE88c312bBc9981D946F6a224e0BEC92B',
        '0x5b81E08d8eA38384dA53ED27AfD5a9988A958A5a',
        '0x15aF45406f3e4Aad0C4EA47e8398dF41F3e3E193',
        '0x4EF6D27C3fbA8E266f23481F129aB65570f162fF',
        '0x88B29c7feC46D0f4241dc7a9915697F4630EdA37',
        '0x5b06188bc9085359E42DaF9529Edce6EfEAd7C8f',
        '0xc90fd895f88DEC9D65820aeb4C860Fde036dae04',
        '0x4d3CcDd65eaA5a521D7066EE99CEd8779Bb82382',
        '0x42Cd4F4c0135053F6DE40C2F96863C85fc5B2B42',
        '0x31DD9Cc3dAbd4810141Ed8fDFa1FF0125c605Afa',
        '0xfcB38763E30700aCAf661CffDfB0e5ab087138aB',

        // '0x9335264956AF1E68579CdeF0F5c908f1668DDE3F',
    ];

    for (let keeper of keepers) {
        await deployer.sendTransaction({ to: keeper, value: ethers.utils.parseEther('100') });

        await waitForTx(await roleManager.addKeeper(keeper));
        await waitForTx(await roleManager.addPoolAdmin(keeper));
    }

    const art = await deployments.deploy(`MockMultipleTransfer`, {
        from: deployer.address,
        contract: 'MockMultipleTransfer',
        args: [],
        ...COMMON_DEPLOY_PARAMS,
    });
    console.log(`MockMultipleTransfer address: ${art.address}`);
    await deployer.sendTransaction({
        to: art.address,
        value: ethers.utils.parseEther('100000'),
    });
    console.log(await usdt.mint(art.address, ethers.utils.parseUnits('100000000000000', 6)));
}
// 0xb3c38c0bc1d38f1ef60828ec34e502a7835218882f60bb20b17fe9480e0c8fe8----0x28f5D9dA3699d82dd7Dc91C7a776Dc0F5C66a0dB
// 0x351293def8a296616c81b84c1689e6792e4fff96a2a9c6e22c22a7ccbb85eb95----0x679A66eB96d24c7e3E260FC15165c76B34325f57
// 0x9387ee272dbbade8c599d3c2e0e2e383030370c435969257343d659d3435f1c1----0x2e00086D3A5229c967807728A19c2C1617B0A41A
// 0xda27dfb762bfeb2ac968efe0b6f371b7f375fd6b7bea013ad70581239fcf60f6----0xe916F89A91ACbF8a37E8af61E94B1fa5A475385F
// 0xc5f84329519a19b5f6b7bd030a654155ede7e2dea11ef877d31b29e4165a5f27----0xdDa8a43Aa6931ab354067604118C02D67bA42ebB
// 0xb964f175bc281f0e04f3d1bff052abd42b36cadba3ed8b75be9c617387c2b16d----0x0Df050716de174a36C7f4837Bb2a5166A15963ee
// 0x138bf7be4a0bc2b98e811ee1b57962d0deec71eb75e7364a11456a4e59a10563----0x787E5C5BAf549969dD21fb7DFf64c71e0a6277e7
// 0x9ce7eee0a68e339f1ceb5e3734eeaa87b41066b451962900c0e1f695e0c9a1d3----0xc81b88D4d5323235276ba97B638EE6AccdBcA07b
// 0x771f9188f1a6bc412cda3915a6b49b8046de4ad1e10f9233096d348b833b81fd----0xebF71DFb9ED7DdAA16bf6Ac719B545a5E5e66161
// 0x8d29209bf9305ac5049c89a71d52a8f68ec8bef828486727fb969185851db3d4----0xE516b69dbc562e7a3DA03BC14469339B667A08FF
// 0x1632a0c73e3c9a8ce3f6534c892405bff4dd3440305da235a01d8f7b65893bfa----0x0638740B0F25fCA1D767c0B43969d85AF99a4B97
// 0x730857321d14b032dd3318e837294fcb3ff80cce46cf29a4bfde7ac56b94027f----0x35e3492b63d710Ec6FE205864dd93da61C933B9e
// 0x56d24895f9ee5ba602e9ef4fbf277dcfc9900908eede156420c0a9d9b5fdbd13----0x92A46B2edB0b94a644a5478d530C497EE9Bf105F
// 0x966d3467e5843ac99881e440e9b04838ee2b1352660d63682d86d5f336f9a197----0xA2ED377384f4B365c72D42F7bF1D3350D1bd8307
// 0x3d623cd540171a7c11569e1e0db01bef0888db95153863d882c40bcfb837e751----0x854b46Bf92A701B6302e5FA74891A049dEF4fC17
// 0x289a8f0ad8db04a932036a04e2d7a795e6b6c388ea9db9e6c9f40c246562b527----0x7c527e9c906FdAf1Cc9a0a0A834f3fB61f5bC5E7
// 0x9413772818cda498ae7a96edf40019e8c511b5abd04a1697f37eac62b7760fa8----0x45F37EA1a742A844014E61a089E41F2E54d9afCB
// 0xdc89f601eb3e4b4b0de6165e4c7bbc5e8c5f94d31e2fdc76e5895a73347851a4----0x0E060A483DD21253CD9b925731410a5A36DeAFCA
// 0xf185358c1e92b6b904d9da974d3fb65a4e87d3182c2a8e4c0cc30543ebeff81a----0x8a8351c5ce455316186b3df34c2C25699015d3A2
// 0x3878cdce8546f2e73f144fe4b60b6a95830f6c4bb4a6819eaabd7f54539f91f2----0x5042EaB499772b0d5A6C21155289E68876c7075d
// 0x701e576f25d0070ea3a81266d3ad18efb58210b07a732f52c0fd7ba1ca5f209d----0x707c081BEE64760c909fbE0f46650c53d4065631
// 0x66f53ebb5af5592192e208f7dba85e78239fa44ea47d2dec7cfe8f870b4b26ea----0x1d0E5cB02f13A701Ce304aE37F71964a698c17de
// 0xdc2f6b0463ee5d4af901c284b8f1a3f25bdefba9f008b322e4a22aad687f7582----0x6c243672d7B0e5AD15b09363498183fcf27Af326
// 0xd8172dae4fdf3ff9d285b91ba066bbf97325c6b3967c8f39e14f330dfd030e99----0x9e911374973Ac42cd6634d0Ab3f667193590BBBd
// 0x3ea34d2b0876a873d6baaebc84c9433cf0da733657f78f027ab8af5d31d23ed1----0x098DADa780c91F7998ACfc3d15eB42e647bDf336
// 0x514c281f43df6af0a4b14909f96ab030fff5ca577f43b8fc1014bfcd8fe6f538----0xd32Fa22171427D4B0D1741D54C3eC6Cd9AcFA289
// 0xfd89ed7a822723cc6099891818dcd176249433d73662bc9df3344d19d6c3dbc3----0xCBf4849393e1dcBeb6dE13216AfFDB481D3A05f5
// 0x3e986879b7670deb775d637ba425c6ad83ddcb6b5e0ddd3783215326d334c1ac----0xe7d052c39129DFdb637A5930c1FF14D7DF5E0BD4
// 0x55e1783016a3d9dc4ce5d9d9917a900ec89849a21e38c4837f2615273fbdb49f----0xeaC1312b246CbA147Ca85713081e524726484797
// 0x096f6becb1ac0c6fa2f7211e2a8e47c63b571f9a3e6b3d6d90302e7b37b5356b----0x5E54c5ADE88c312bBc9981D946F6a224e0BEC92B
// 0xd04da89c1e71f64cff9a8316b712f56d93024ad03e765b3f005d7787e2de775e----0x5b81E08d8eA38384dA53ED27AfD5a9988A958A5a
// 0x119e1ed92115f2ec25b15901f15471905a0a8ffbe511f48764267be42038cce9----0x15aF45406f3e4Aad0C4EA47e8398dF41F3e3E193
// 0x09aa19098ea304bdf22c7b2cc56367ea61ed96e3be4704a01c20afb14ab463eb----0x4EF6D27C3fbA8E266f23481F129aB65570f162fF
// 0xdb0c414c420cac1448cfc738e615a59f0a52285c0b4324abba220f6e7d6be72c----0x88B29c7feC46D0f4241dc7a9915697F4630EdA37
// 0xb11771ba04421573f216c8da7e3891bf3d20da74fc72be1c5839981624990fbf----0x5b06188bc9085359E42DaF9529Edce6EfEAd7C8f
// 0x11b729315236495f11a896e38e04c7e2d00e88f8090c3b7930352e72edbc1505----0xc90fd895f88DEC9D65820aeb4C860Fde036dae04
// 0xa910dbdbba6db9e0775cad024b849a79b98162e57e099a07bb4d8d7883e93f0b----0x4d3CcDd65eaA5a521D7066EE99CEd8779Bb82382
// 0x97c449a67943379ada3818490fb047106b054b49b52967274ebd77ea40615adf----0x42Cd4F4c0135053F6DE40C2F96863C85fc5B2B42
// 0xbf325b4a49e95007668899e659151150c427690231acb4713912a5f96d6abf45----0x31DD9Cc3dAbd4810141Ed8fDFa1FF0125c605Afa
// 0xad95f45847b9954cf0d4c7e0a6eb4b478bf4c705ad3387382045605b931f6249----0xfcB38763E30700aCAf661CffDfB0e5ab087138aB
// âœ¨  Done in 4.66s.
main().catch((error) => {
    console.error(error);
    process.exitCode = 1;
});
